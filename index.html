<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recommended SKKU Courses for UiO IFI Exchange Students</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { padding: 8px 12px; border: 1px solid #ccc; text-align: left; }
        th { background-color: #f2f2f2; cursor: pointer; }
        .filters { margin-bottom: 20px; }
        .filters select { margin-right: 15px; }
        .course-toggle {
            background: none;
            border: none;
            color: #0645ad;
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
            font: inherit;
        }
        .course-description-cell {
            background-color: #f9f9f9;
            padding: 10px;
            font-size: 0.95em;
        }
        .seoul-row {
    background-color: #f0f8ff; /* Light blue for Seoul */
        }
        .suwon-row {
    background-color: #faf8e9; /* Light yellow for Suwon */
        }
</style>
</head>
<body>

<h1>Recommended SKKU Courses for UiO IFI Exchange Students</h1>
<p><strong>Disclaimer:</strong> This information is intended for planning purposes. Exact course availability and details may change based on SKKU's official course offerings via
    <a href="https://eportal.skku.edu/" target="_blank">
    SKKU e-portal page.
    </a>
</p>
<p>This page lists selected courses at SKKU that are relevant for UiO IFI exchange students. Clicking each course number will display the corresponding course description.
</p>
<p>Full-time studies at SKKU are 15 credits for students at bachelor's level and 9 credits for students at master's level.</p>
<!-- <p>For a bachelor's student, we recommend you to take major-related courses for 9 credits, 3 for the math courses, and 3 with your own interest.</p>
<p>For a master's student, we recommend you to take major-related courses for 9 credits.</p> -->
<p>For more information, visit 
    <a href="https://www.uio.no/studier/utveksling/avtaler/asia/sor-korea/sungkyunkwan/mn.html" target="_blank">
      UiO's SKKU exchange page.
    </a>
</p>

<div class="filters">
    <label>Year:
    <select id="yearFilter">
        <option value="">All</option>
        <option value="2025">2025</option>
    </select>
    </label>
    <label>Semester:
    <select id="semesterFilter">
        <option value="">All</option>
        <option value="Autumn">Autumn</option>
        <option value="Spring">Spring</option>
    </select>
    </label>
    <label>Campus:
    <select id="campusFilter">
        <option value="">All</option>
        <option value="Suwon">Suwon (Natural Sciences Campus)</option>
        <option value="Seoul">Seoul (Humanities and Social Sciences Campus)</option>
        <option value="Online">Online</option>
    </select>
    </label>
    <label>Track:
    <select id="trackFilter">
        <option value="">All</option>
        <option value="IFI">All IFI majors</option>
        <option value="ML">Machine Learning (ML)</option>
        <option value="PROSA">Programming and systems architecture (PROSA)</option>
        <option value="LT">Language technology (LT)</option>
        <option value="DBI">Design, Use, and Interaction (DBI)</option>
        <option value="Math">Mathematics</option>
        <option value="Others">Others</option>
    </select>
    </label>
    <label>Major:
    <select id="departmentFilter">
        <option value="">All</option>
    </select>
    </label>
    <label>Level:
    <select id="levelFilter">
        <option value="">All</option>
        <option value="BS+MS">BS+MS</option>
        <option value="BS">BS</option>
        <option value="MS">MS</option>
    </select>
    </label>
    <label>Level Category:
        <select id="levelCategoryFilter">
            <option value="">All</option>
            <option value="Common">Common</option>
            <option value="2xxx">2xxx</option>
            <option value="3xxx">3xxx</option>
            <option value="4xxx">4xxx</option>
            <option value="5xxx">5xxx</option>
        </select>
        </label>
    <label>Credits:
    <select id="creditsFilter">
        <option value="">All</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="6">6</option>
    </select>
    </label>
</div>

<table id="courseTable">
    <thead>
    <tr>
        <th>Course Number</th>
        <th>Title</th>
        <th>Year</th>
        <th>Semester</th>
        <th>Campus</th>
        <th>Track</th>
        <th>Level</th>
        <th>Credits</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<script>

const departmentMapping = {
    BIZ: "BIZ: Business Administration",
    BUS: "BUS: Business Administration",
    CNT: "CNT: Culture and Technology",
    COM: "COM: Artificial Intelligence and Immersive Media Engineering",
    CON: "CON: Consumer Science",
    COS: "COS: Confucian Studies and Eastern Philosophy",
    CSE: "CSE: Data Science and Artificial Intelligence",
    DAI: "DAI: Artificial Intelligence and Immersive Media Engineering",
    DASF: "DASF: Data Science and Artificial Intelligence",
    DBA: "DBA: Business Administration",
    DES: "DES: Design",
    DIM: "DIM: Artificial Intelligence and Immersive Media Engineering",
    DSC: "DSC: Artificial Intelligence and Immersive Media Engineering",
    ECE: "ECE: Electrical and Computer Engineering",
    ECO: "ECO: Economics",
    EEE: "EEE: Electronic and Electrical Engineering",
    EME: "EME: Robotics and Mechanical Engineering",
    ERC: "ERC: Mathematics",
    ESM: "ESM: Systems Management Engineering",
    FTM: "FTM: Culture and Technology",
    GEDB: "GEDB: Electives",
    GEDH: "GEDH: Electives",
    GEDN: "GEDN: Electives",
    GEDS: "GEDS: Electives",
    GELT: "GELT: Electives",
    HAI: "HAI: Artificial Intelligence and Interaction Science",
    ICE: "ICE: Information and Communication Engineering",
    IEC: "IEC: Exchange/Visiting",
    LIS: "LIS: Library and Information Science",
    MAE: "MAE: Mathematics Education",
    MCJ: "MCJ: Culture and Technology",
    MTH: "MTH: Mathematics",
    PHY: "PHY: Physics",
    PSY: "PSY: Psychology",
    ROB: "ROB: Robotics and Mechanical Engineering",
    STA: "STA: Statistics",
    SUP: "SUP: Data Science and Artificial Intelligence",
    SWE: "SWE: Intelligent Software Engineering",
    WIS: "WIS: Artificial Intelligence and Interaction Science"
};

async function loadCoursesFromCSV() {
    const response = await fetch('courses2025_cleaned.csv');
    const data = await response.text();
    const rows = data.trim().split('\n');
    const headers = rows.shift().split(',');

    const tbody = document.querySelector("#courseTable tbody");
    tbody.innerHTML = '';

    const departments = new Set();

    const levels = new Set();

    for (const row of rows) {
        const cols = parseCSVLine(row);
        const [course, title, year, sem, campus, track, level, credits, desc] = cols;

        // Extract department and level from the course code
        const department = course.match(/[A-Za-z]+/)[0]; // Letter part
        const departmentFull = departmentMapping[department] || department; // Map to full name or fallback to short name
        const courseLevel = parseInt(course.match(/\d+/)[0], 10); // Number part

        // Add department full name to the set for filter options
        departments.add(departmentFull);
        if (courseLevel < 1000) {
            levels.add('Common');
        } else if (courseLevel >= 2000 && courseLevel < 3000) {
            levels.add('2xxx');
        } else if (courseLevel >= 3000 && courseLevel < 4000) {
            levels.add('3xxx');
        } else if (courseLevel >= 4000 && courseLevel < 5000) {
            levels.add('4xxx');
        } else if (courseLevel >= 5000 && courseLevel < 6000) {
            levels.add('5xxx');
        }

        const mainRow = document.createElement('tr');
        const campusClass = campus === "Seoul" ? "seoul-row" : campus === "Suwon" ? "suwon-row" : "";
        mainRow.className = campusClass; // Apply the class based on campus

        mainRow.innerHTML = `
            <td><button class="course-toggle" data-description="${desc}">${course}</button></td>
            <td>${title}</td>
            <td>${year}</td>
            <td>${sem}</td>
            <td>${campus}</td>
            <td>${track}</td>
            <td>${level}</td>
            <td>${credits}</td>
        `;

        const descRow = document.createElement('tr');
        descRow.className = "course-description-row";
        descRow.style.display = "none";
        descRow.innerHTML = `<td colspan="8" class="course-description-cell"></td>`;

        tbody.appendChild(mainRow);
        tbody.appendChild(descRow);
    }

    // Populate department and level filters
    populateFilterOptions('departmentFilter', Object.values(departmentMapping).sort());
    populateFilterOptions('levelCategoryFilter', ['Common', '2xxx', '3xxx', '4xxx', '5xxx']);

    attachToggleLogic();
    filterTable();
}


function populateFilterOptions(filterId, options) {
    const filter = document.getElementById(filterId);
    filter.innerHTML = '<option value="">All</option>';
    options.forEach(option => {
        const opt = document.createElement('option');
        if (filterId === 'departmentFilter') {
            opt.value = option.split(": ")[1]; // Use full name as the value
            opt.textContent = option; // Display shortName: fullName in the dropdown
        } else {
            opt.value = option;
            opt.textContent = option;
        }
        filter.appendChild(opt);
    });
}
function parseCSVLine(line) {
    const regex = /(".*?"|[^",\s]+)(?=\s*,|\s*$)/g;
    const result = [];
    let match;
    while ((match = regex.exec(line)) !== null) {
        let value = match[1];
        if (value.startsWith('"') && value.endsWith('"')) {
            value = value.slice(1, -1).replace(/""/g, '"');
        }
        result.push(value);
    }
    return result;
}

function attachToggleLogic() {
    document.querySelectorAll('.course-toggle').forEach(button => {
        button.addEventListener('click', () => {
            const row = button.closest('tr');
            const nextRow = row.nextElementSibling;
            const descCell = nextRow.querySelector('.course-description-cell');
            const isVisible = nextRow.style.display === '';
            nextRow.style.display = isVisible ? 'none' : '';
            descCell.innerHTML = isVisible ? '' : `<strong>Course Description:</strong> ${button.dataset.description}`;
        });
    });
}

const filters = {
    year: document.getElementById('yearFilter'),
    semester: document.getElementById('semesterFilter'),
    campus: document.getElementById('campusFilter'),
    track: document.getElementById('trackFilter'),
    department: document.getElementById('departmentFilter'),
    credits: document.getElementById('creditsFilter'),
    level: document.getElementById('levelFilter'),
    levelCategory: document.getElementById('levelCategoryFilter')
};

function filterTable() {
    const allRows = document.querySelectorAll("#courseTable tbody tr");
    allRows.forEach(row => {
        if (row.classList.contains("course-description-row")) {
            row.style.display = "none";
            row.querySelector(".course-description-cell").innerHTML = "";
            return;
        }

        const course = row.children[0].textContent.trim();
        const departmentShort = course.match(/[A-Za-z]+/)[0]; // Extract short code
        const departmentFull = departmentMapping[departmentShort] || departmentShort; // Map to full name

        const courseLevel = parseInt(course.match(/\d+/)[0], 10);
        const levelCategory = courseLevel < 1000 ? 'Common' :
                              courseLevel >= 2000 && courseLevel < 3000 ? '2xxx' :
                              courseLevel >= 3000 && courseLevel < 4000 ? '3xxx' :
                              courseLevel >= 4000 && courseLevel < 5000 ? '4xxx' :
                              '5xxx';

        const year = row.children[2].textContent.trim();
        const semester = row.children[3].textContent.trim();
        const campus = row.children[4].textContent.trim();
        const track = row.children[5].textContent.trim();
        const level = row.children[6].textContent.trim();
        const credits = row.children[7].textContent.trim();

        const show = (!filters.year.value || filters.year.value === year) &&
                     (!filters.semester.value || filters.semester.value === semester) &&
                     (!filters.campus.value || filters.campus.value === campus) &&
                     (!filters.track.value || filters.track.value === track) &&
                     (!filters.level.value || filters.level.value === level) &&
                     (!filters.credits.value || filters.credits.value === credits) &&
                     (!filters.department.value || filters.department.value === departmentFull.split(": ")[1]) && // Compare full name
                     (!filters.levelCategory.value || filters.levelCategory.value === levelCategory);

        row.style.display = show ? "" : "none";
    });

    sortTableByCourseNumber();
}

function sortTableByCourseNumber() {
    const tbody = document.querySelector("#courseTable tbody");
    const rows = Array.from(tbody.querySelectorAll("tr"));

    const rowPairs = [];
    for (let i = 0; i < rows.length; i += 2) {
        if (!rows[i + 1]) break;
        rowPairs.push([rows[i], rows[i + 1]]);
    }

    const visiblePairs = rowPairs.filter(pair => pair[0].style.display !== "none");
    visiblePairs.sort((a, b) => {
        const courseA = a[0].cells[0].textContent.trim();
        const courseB = b[0].cells[0].textContent.trim();

        const yearA = a[0].cells[2].textContent.trim();
        const yearB = b[0].cells[2].textContent.trim();

        const semesterA = a[0].cells[3].textContent.trim();
        const semesterB = b[0].cells[3].textContent.trim();

        const campusA = a[0].cells[4].textContent.trim();
        const campusB = b[0].cells[4].textContent.trim();

        // Sort by course number, then year, then semester, then campus
        return courseA.localeCompare(courseB) ||
               yearA.localeCompare(yearB) ||
               semesterA.localeCompare(semesterB) ||
               campusA.localeCompare(campusB);
    });

    visiblePairs.forEach(pair => {
        tbody.appendChild(pair[0]);
        tbody.appendChild(pair[1]);
    });
}

Object.values(filters).forEach(select => {
    select.addEventListener("change", filterTable);
});

window.addEventListener("DOMContentLoaded", loadCoursesFromCSV);
</script>

</body>
</html>
